<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.victoria.bleled">

    <!-- Manage External은 전체 파일에 Access해야 할시만 이용 -->
    <!-- <uses-permission android:name="android.permission.MANAGE_EXTERNAL_STORAGE" /> -->
    <!-- android 11이상일 경우 WRITE_EXTERNAL_STORAGE은 더이상 지원안됨. read만 요청해도 특정 external과 scope령역 액세스가능함 -->
    <!-- Background권한은 반드시 이용사유를 동영상으로 제출해야 하며 처음에 요청페지가 떠야 함. -->
    <!-- <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" /> -->

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <!--
        Push wake permission
    -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <!--
        Service Permission
    -->
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />

    <!--
        camera, gallary, storage
    -->
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />

    <!--
        Request legacy Bluetooth permissions on older devices.
    -->
    <uses-permission
        android:name="android.permission.BLUETOOTH"
        android:maxSdkVersion="30" />
    <uses-permission
        android:name="android.permission.BLUETOOTH_ADMIN"
        android:maxSdkVersion="30" />
    <!--
        Needed only if your app looks for Bluetooth devices.
         If your app doesn't use Bluetooth scan results to derive physical
         location information, you can strongly assert that your app
         doesn't derive physical location.
    -->
    <uses-permission android:name="android.permission.BLUETOOTH_SCAN" />
    <!--
        Needed only if your app makes the device discoverable to Bluetooth devices.
    -->
    <uses-permission android:name="android.permission.BLUETOOTH_ADVERTISE" />
    <!--
        Needed only if your app communicates with already-paired Bluetooth devices.
    -->
    <uses-permission android:name="android.permission.BLUETOOTH_CONNECT" />
    <!--
        Needed only if your app uses Bluetooth scan results to derive physical location.
    -->
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION"/>
    <!--
        AlarmManager
    -->
    <uses-permission android:name="android.permission.SCHEDULE_EXACT_ALARM" />

    <!--
       For only Barcode scan
   -->
    <uses-sdk tools:overrideLibrary="com.google.zxing.client.android" />



    <meta-data
        android:name="android.allow_multiple_resumed_activities"
        android:value="true" />

    <queries>
        <package android:name="com.android.camera.action.CROP" />

        <!-- mail -->
        <intent>
            <action android:name="android.intent.action.SENDTO" />

            <data android:scheme="*" />
        </intent>

        <!-- Browser -->
        <intent>
            <action android:name="android.intent.action.VIEW" />

            <data android:scheme="http" />
        </intent>
        <intent>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.BROWSABLE" />

            <data android:scheme="https" />
        </intent>

        <!-- Camera -->
        <intent>
            <action android:name="android.media.action.IMAGE_CAPTURE" />
        </intent>

        <!-- Gallery -->
        <intent>
            <action android:name="android.intent.action.GET_CONTENT" />
        </intent>
    </queries>

    <application
        android:name=".app.MyApplication"
        android:allowBackup="false"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:largeHeap="true"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/AppTheme.NoActionBar"
        android:usesCleartextTraffic="true"
        tools:ignore="LockedOrientationActivity"
        tools:replace="android:allowBackup">
        <activity
            android:name=".app.auth.SigninActivity"
            android:exported="false"
            android:theme="@style/AppTheme.NoActionBar" />
        <activity
            android:name=".app.recent.compose.ComposeMainActivity"
            android:exported="false"
            android:theme="@style/AppTheme.NoActionBar" />
        <activity
            android:name=".app.recent.compose.ComposeCodelabActivity"
            android:exported="false"
            android:theme="@style/AppTheme.NoActionBar" />
        <activity
            android:name=".app.essential.gallery.GallerySelectCropActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name=".app.etc.WebViewActivity"
            android:exported="false" />
        <activity
            android:name=".app.special.calendar.CalendarActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name=".app.more.SettingActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name=".app.auth.SignupActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name=".app.essential.anim.AnimActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name=".app.essential.CameraTestActivity"
            android:screenOrientation="fullSensor" />
        <activity
            android:name=".app.special.bluetooth.BluetoothTestActivity"
            android:screenOrientation="fullSensor" />
        <activity
            android:name=".app.recent.VideoPlayerActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:screenOrientation="portrait"
            android:supportsPictureInPicture="true"
            tools:targetApi="n">
            <layout
                android:defaultWidth="600dp"
                android:defaultHeight="500dp"
                android:gravity="top|end"
                android:minWidth="300dp"
                android:minHeight="450dp" />
        </activity>
        <activity
            android:name=".app.main.MainActivity"
            android:configChanges="screenSize|smallestScreenSize|screenLayout|orientation"
            android:resizeableActivity="true"
            android:screenOrientation="portrait"
            tools:ignore="LockedOrientationActivity"
            tools:targetApi="n" />
        <activity
            android:name=".app.SplashActivity"
            android:exported="true"
            android:screenOrientation="portrait"
            android:theme="@style/AppTheme.SplashScreen"
            android:windowSoftInputMode="adjustPan">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name=".app.recent.background.MyAlarmService" /> <!-- crop -->
        <activity
            android:name="com.canhub.cropper.CropImageActivity"
            android:theme="@style/Base.Theme.AppCompat" />
        <!-- file provider for camera -->
        <provider
            android:name="androidx.core.content.FileProvider"
            android:authorities="${applicationId}.provider"
            android:exported="false"
            android:grantUriPermissions="true">
            <meta-data
                android:name="android.support.FILE_PROVIDER_PATHS"
                android:resource="@xml/provider_paths" />
        </provider> <!-- fcm -->
        <service
            android:name=".service.fcm.MyFirebaseMessagingService"
            android:exported="true"
            android:stopWithTask="false">
            <intent-filter>
                <action android:name="com.google.firebase.MESSAGING_EVENT" />
            </intent-filter>
        </service>

        <meta-data
            android:name="firebase_messaging_auto_init_enabled"
            android:value="true" />
        <meta-data
            android:name="firebase_analytics_collection_enabled"
            android:value="true" /> <!-- Alarm Manager -->
        <receiver
            android:name=".app.recent.background.AlarmReceiver"
            android:exported="false" />
        <receiver
            android:name=".app.recent.background.BootReceiver"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
    </application>

</manifest>